# Databricks Demos - Bundle Configuration
# Multi-Country Retirement Advisory with Agentic AI

name: "retirement-advisory-multi-country"
category: "financial-services"
title: "Multi-Country Retirement Advisory with Agentic AI"
description: |
  Production-grade retirement advisory agent supporting 4 countries (AU, US, UK, IN)
  using Databricks Lakehouse, Unity Catalog governance, and Claude-based agentic AI.

  **Key Features:**
  - Multi-country support with country-specific regulations (AU, US, UK, IN)
  - Unity Catalog for data governance and access control
  - LLM-based agent with tool calling for retirement calculations
  - Real-time monitoring with MLflow experiment tracking
  - Comprehensive audit logging and compliance
  - Streamlit-based interactive UI

  **Use Case:**
  Demonstrates how to build production-grade agentic AI applications on Databricks
  for regulated industries like financial services, handling complex multi-country
  compliance requirements.

# Installation requirements
custom_schema_supported: true
default_catalog: "super_advisory_demo"
default_schema: "member_data"

# Databricks Runtime requirements
min_dbr_version: "14.3"
cloud: "all"  # Works on AWS, Azure, GCP

# Cluster configuration
cluster:
  spark_version: "14.3.x-scala2.12"
  node_type_id: "i3.xlarge"
  driver_node_type_id: "i3.xlarge"
  num_workers: 2
  spark_conf:
    spark.databricks.cluster.profile: "serverless"

# Demo notebooks
notebooks:
  # Setup and data generation
  - path: "_resources/00-setup"
    pre_run: false
    publish_on_website: true
    add_cluster_setup_cell: true
    title: "Demo Setup"
    description: "Initialize catalog, schemas, and configuration"

  - path: "_resources/00-load-data"
    pre_run: false
    publish_on_website: true
    add_cluster_setup_cell: true
    title: "Generate Demo Data with Faker"
    description: "Generate synthetic member profiles for 4 countries using Faker"

  # Setup notebooks
  - path: "01-setup/01-unity-catalog-setup"
    pre_run: false
    publish_on_website: true
    add_cluster_setup_cell: true
    title: "Unity Catalog Setup"
    description: "Create catalog, schemas, tables, and UC functions for multi-country support"

  - path: "01-setup/02-governance-setup"
    pre_run: false
    publish_on_website: true
    add_cluster_setup_cell: true
    title: "Governance & Access Control"
    description: "Set up row-level security, column masking, and audit logging"

  # Agent framework notebooks
  - path: "02-agent-demo/01-agent-overview"
    pre_run: true
    publish_on_website: true
    add_cluster_setup_cell: true
    title: "Agent Framework Overview"
    description: "Introduction to the multi-country agentic AI architecture"

  - path: "02-agent-demo/02-build-agent"
    pre_run: true
    publish_on_website: true
    add_cluster_setup_cell: true
    title: "Build Advisory Agent"
    description: "Create the retirement advisory agent with LLM orchestration"

  - path: "02-agent-demo/03-tool-integration"
    pre_run: true
    publish_on_website: true
    add_cluster_setup_cell: true
    title: "Tool Integration"
    description: "Integrate Unity Catalog functions as agent tools"

  - path: "02-agent-demo/04-validation"
    pre_run: false
    publish_on_website: true
    add_cluster_setup_cell: true
    title: "Response Validation"
    description: "LLM-as-a-Judge validation for response quality"

  # Monitoring notebooks
  - path: "03-monitoring-demo/01-mlflow-tracking"
    pre_run: false
    publish_on_website: true
    add_cluster_setup_cell: true
    title: "MLflow Experiment Tracking"
    description: "Track agent performance, costs, and quality metrics"

  - path: "03-monitoring-demo/02-observability"
    pre_run: false
    publish_on_website: true
    add_cluster_setup_cell: true
    title: "Agent Observability"
    description: "Monitor agent behavior, latency, and tool usage"

  - path: "03-monitoring-demo/03-dashboard"
    pre_run: false
    publish_on_website: true
    add_cluster_setup_cell: true
    title: "Governance Dashboard"
    description: "Interactive dashboard for audit logs and compliance"

  # UI demo
  - path: "04-ui-demo/01-streamlit-ui"
    pre_run: false
    publish_on_website: true
    add_cluster_setup_cell: false
    title: "Streamlit UI"
    description: "Interactive web interface for the advisory agent"

# Initialization job (runs on demo install)
init_job:
  name: "Retirement Advisory Demo Setup"
  tasks:
    - task_key: "setup_catalog"
      notebook_task:
        notebook_path: "_resources/00-setup"
    - task_key: "load_data"
      notebook_task:
        notebook_path: "_resources/00-load-data"
      depends_on:
        - task_key: "setup_catalog"

# Dashboards to create
dashboards:
  - name: "Retirement Advisory - Governance Dashboard"
    id: "governance_dashboard"
    path: "03-monitoring-demo/governance_dashboard.json"

# Tags for categorization
tags:
  - "financial-services"
  - "agentic-ai"
  - "unity-catalog"
  - "governance"
  - "multi-country"
  - "llm"
  - "claude"
  - "mlflow"

# Additional metadata
bundle_version: "1.0.0"
author: "Databricks"
last_updated: "2025-11-25"
